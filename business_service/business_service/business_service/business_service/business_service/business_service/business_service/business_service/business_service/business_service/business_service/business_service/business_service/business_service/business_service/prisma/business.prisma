import { Location } from "./location"
import { Settings } from "./settings"
import { Profile } from "./profile"
import { Client } from "./customer"
import { PaymentMethods } from "./payment"
import { Service } from "./service"
import { Branch, Business } from "schema"

model Business {
    id Int @id @default(autoincrement()) @unique
    user_id Int
    profile_id Int @unique
    profile Profile @relation(fields: [profile_id], references: [id], onDelete: Cascade)
    settings_id Int @unique
    settings Settings @relation(fields: [settings_id], references: [id], onDelete: Cascade)
    location_id Int @unique
    location Location @relation(fields: [location_id], references: [id], onDelete: Cascade)
    payment_methods_id Int @unique
    payment_methods PaymentMethods @relation(fields: [payment_methods_id], references: [id]) 
    branch_id Int @unique
    branch Branch @relation(fields: [branch_id], references: [id])
    //One becomes a customer when the business adds him or after a successfull appointment
    clients Client[]
    services Service[]
}

model Branch {
    id Int @id @default(autoincrement()) @unique
    is_branch Boolean
    headquarters_id Int
    business Business?
}

